{% extends "layout.html.twig" %}
{% block page_title %}
    Inscription
{% endblock %}

{% block content %}
<div class="hero-area height-400 bg-img background-overlay" style="background-image: url({{ asset('images/bg4.jpg') }});"></div>
<div class="main-content-wrapper section-padding-25">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12">
                <h2>
                    Inscription
                </h2>
                <hr>
                {% for message in app.flashes('notice') %}
                    <div class="alert alert-success">
                        {{ message }}
                    </div>
                {% endfor %}
                {# L'option novalidate permet de supprimer la validation html5#}
                {{ form(form,{attr:{novalidate: 'novalidate'}}) }}
                <div id="paypal-button-container"></div>
            </div>
        </div>
    </div>
</div>
{%endblock %}
{% block final_javascripts %}
    <script src="https://www.paypalobjects.com/api/checkout.js"></script>
    <script>

        // Render the PayPal button
        paypal.Button.render({
// Set your environment
            env: 'sandbox', // sandbox | production

// Specify the style of the button
            style: {
                layout: 'vertical',  // horizontal | vertical
                size:   'medium',    // medium | large | responsive
                shape:  'rect',      // pill | rect
                color:  'gold'       // gold | blue | silver | white | black
            },

// Specify allowed and disallowed funding sources
//
// Options:
// - paypal.FUNDING.CARD
// - paypal.FUNDING.CREDIT
// - paypal.FUNDING.ELV
            funding: {
                allowed: [
                    paypal.FUNDING.CARD,
                    paypal.FUNDING.CREDIT
                ],
                disallowed: []
            },

// Enable Pay Now checkout flow (optional)
            commit: true,

// PayPal Client IDs - replace with your own
// Create a PayPal app: https://developer.paypal.com/developer/applications/create
            client: {
                sandbox: 'AZDxjDScFpQtjWTOUtWKbyN_bDt4OgqaF4eYXlewfBP4-8aqX3PiV8e1GWU6liB2CUXlkA59kJXE7M6R',
                production: '<insert production client id>'
            },

            payment: function (data, actions) {
                return actions.payment.create({
                    payment: {
                        transactions: [
                            {
                                amount: {
                                    total: '0.01',
                                    currency: 'USD'
                                }
                            }
                        ]
                    }
                });
            },

            onAuthorize: function (data, actions) {
                return actions.payment.execute()
                    .then(function () {
                        window.alert('Payment Complete!');
                    });
            }
        }, '#paypal-button-container');
    </script>
{% endblock %}
